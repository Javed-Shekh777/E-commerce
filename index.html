{% extends 'base.html' %}
{% load static %}
{% block content %}
<style>
    .abc {
    min-height: 230px;
    box-shadow: 0px 0px 10px gray;
    height: 120px;
    transition:.2s;
    }
   .abd {
    min-height: 280px;
    box-shadow: 0px 0px 10px gray;
    min-height: 150px;
    transition:.2s;
    }

.agt:hover{
transform:scale(1.05);
transition:.2s;
}

.abc:hover{
    transform:scale(1.05);
    transition:.2s;
    }
    
.abd:hover{
    transform:scale(1.05);
    transition:.2s;
    }

    </style>
    {% comment %} <div class="row slider mb-2 pt-4 ">
      <!--         <div class="col-sm-4">-->
      <!--<img src="{% static 'images/offer1.jpg' %}" style="max-height:200px;border-radius:20px;" class="img-fluid w-100"/>-->
      <!--         </div>-->
      
           <div class="col-sm-12 ">
                       <!---start slider-->
             <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active" data-bs-interval="1000">
             <img src="{% static 'images/fastfood.jpeg' %}"  style="max-height:400px; border-radius:20px;"  class="d-block w-100" alt="...">
          </div>
      {% for i in sdata %}
          <div class="carousel-item">
           <img src="/{{i.spic}} "style="max-height:400px; border-radius:20px;" class="d-block w-100" alt="...">
          </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
                       
                   </div>
    </div> {% endcomment %}
    <!---end slider-->
    <div class="row slider mb-2 pt-4 ">
      <!--         <div class="col-sm-4">-->
      <!--<img src="{% static 'images/offer1.jpg' %}" style="max-height:200px;border-radius:20px;" class="img-fluid w-100"/>-->
      <!--         </div>-->
      
                   <div class="col-sm-12 ">
                       <!---start slider-->
             <div id="carouselExampleInterval" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active" data-bs-interval="1000">
             <img src="{% static 'images/fornt.jpg' %}"  style="max-height:400px; border-radius:20px;"  class="d-block w-100" alt="...">
          </div>
      {% for i in sdata %}
          <div class="carousel-item">
           <img src="/{{i.spic}} "style="max-height:400px; border-radius:20px;" class="d-block w-100" alt="...">
          </div>
            {% endfor %}
        </div>
        <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="prev">
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Previous</span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleInterval" data-bs-slide="next">
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Next</span>
        </button>
      </div>
                       <!---end slider-->
                   </div>
            </div>
      


    <div class="row category  pt-4">
        {% for x in cdata %}<!--[row,row]-->
      <div class="col-lg-2 col-md-4 col-sm-12">
           <!---start category --->
          <div class="card mb-4 my-4 abc lightbox-gallery"  style="margin-top:20px;">

            <img src="/{{x.cpic}}" class="card-img-top" style="height:150px; "/>

              <div class="card-body">
                 <a href="/user/Product/?cid={{x.id}}"  style="text-decoration:none; max-height:150px;"><p class="text-center btn btn-primary"><b>{{x.cname}}</b></p></a>
              </div>
          </div>

           <!---end category --->
      </div>
        {% endfor %}
    </div>
<!-- box for DP -->

<div class="DP-popup scroll-scale">
    
    <div class="popup-container " >
        <span>&times;</span>
      <img id="img-view" src="/static/images/a2" alt="">

    </div>
  </div>

<!---Todays deals-------->
<div class="row py-3 ">
      <div class="fs-3">Todays<b class="txt-mycolor">deals</b>
</div>
    <!--offer Product-->
    {% for x in pdata %}
    <div class="col-lg-2 col-md-3 col-sm-12">
        <!--start product--->
        <div class="card m-2 abd lightbox-gallery">
 <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill  text-dark bg-warning  ">
    <i class="fa-solid fa-indian-rupee-sign"></i>{{x.total_discount}} %
    <span class="visually-hidden ">unread messages</span>
  </span>
         <img src="/{{x.product_pic}}" style="height:120px; padding-left:10px;" class="img-card-top"/>
            <div class=" card-body">
                <b style="padding-left:5px;">{{x.subcategory_name}}</b><br/>
                <b style="padding-left:5px;">{{x.product_quantity}}</b><i class="fa-solid fa-indian-rupee-sign me-1"></i><b style="padding-left:5px;">{{x.price}}/-</b> <s>{{x.discount_price}}/-
            </s><b>{{x.total_discount}}</b>
                <form  method="get" action="/user/indexcart/">
                <div class="input-group" >

                    <b class="input-group-text" onclick="funmX{{x.id}}()"><i class="fa-solid fa-minus"></i></b>
                    <input type="text" value="0" id="txtcardX{{x.id}}"class="form-control fs-5 text-center" readonly />
                       <input type="hidden" name="pname" value="{{x.subcategory_name}}"/>
                    <input type="hidden" name="price" value="{{x.price}}"/>
                    <input type="hidden" name="pw" value="{{x.product_quantity}}"/>
                    <input type="hidden" name="ppic" value="{{x.product_pic}}"/>
                    <b class="input-group-text"  onclick="funpX{{x.id}}()"><i class="fa-solid fa-plus"></i>
                    </b>
                </div>
                <input type="submit" class="btn bg-mycolor text-light mt-1" value="Add" style="margin-left:0px;"/>
                </form>
            </div>
<!--             &&&&&-->


        </div>


        <!--end product--->
        </div>
        <script>
     var iX{{x.id}}=0;
      var txtcX{{x.id}}=document.getElementById("txtcardX{{x.id}}");
    function funpX{{x.id}}()
    {
    iX{{x.id}}++;
    txtcX{{x.id}}.value=iX{{x.id}};
    }
    function funmX{{x.id}}()
    {
    if(iX{{x.id}}>0){

    iX{{x.id}}--
    txtcX{{x.id}}.value=iX{{x.id}};
    }
    }
</script>
    {% endfor %}
</div>

<!---End Todays deals-------->

<div class="row product bg-light py-3 ">
    <div class="fs-3"> Latest<b class="txt-mycolor">Product</b>
</div>
        {% for x in pdata %}
    <div class="col-lg-2 col-md-3 col-sm-12">
        <!--start product--->
        <div class="card m-2 abd agt mb-3 lightbox-gallery">

         <img src="/{{x.product_pic}}" style="max-height:100px;padding-left:10px;"  class="img-card-top  "/>
            <div class=" card-body">
                <b class="">{{x.subcategory_name}}</b><br/>
                <b class="">{{x.product_quantity}}</b><i class="fa-solid fa-indian-rupee-sign me-1"></i><b>{{x.price}}/-</b><s>{{x.discount_price}}/-
            </s><b>{{x.total_discount}}/-</b>
                <form  method="get" action="/user/indexcart/">
                <div class="input-group" >
                    <b class="input-group-text" onclick="funm{{x.id}}()"><i class="fa-solid fa-minus"></i></b>
                    <input type="text" value="0" id="txtcard{{x.id}}"class="form-control fs-5 text-center" readonly />
                       <input type="hidden" name="pname" value="{{x.subcategory_name}}"/>
                    <input type="hidden" name="price" value="{{x.price}}"/>
                    <input type="hidden" name="pw" value="{{x.product_quantity}}"/>
                    <input type="hidden" name="ppic" value="{{x.product_pic}}"/>
                    <b class="input-group-text"  onclick="funp{{x.id}}()"><i class="fa-solid fa-plus"></i>
                    </b>

                </div>
                <input type="submit" class="btn bg-mycolor text-light mt-1" value="Add" style="margin-left:0px;"/>
                </form>
            </div>

        </div>

        <!--end product--->
        </div>

            <script>
     var i{{x.id}}=0;
      var txtc{{x.id}}=document.getElementById("txtcard{{x.id}}");
    function funp{{x.id}}()
    {
    i{{x.id}}++;
    txtc{{x.id}}.value=i{{x.id}};
    }
    function funm{{x.id}}()
    {
    if(i{{x.id}}>0){

    i{{x.id}}--
    txtc{{x.id}}.value=i{{x.id}};
    }
    }
</script>
    {% endfor %}
</div>


<script>

    /* Script for DP pop up */
  
  
  document.querySelectorAll('.lightbox-gallery img').forEach(image => {
    image.onclick = () => {
      document.querySelector('.DP-popup').style.display = 'block';
      document.querySelector('#img-view').src = image.getAttribute('src');
      const popstyle = document.querySelector('.popup-container')
      popstyle.style.opacity = "1"
      popstyle.style.Transform = "translateX(0)"
      popstyle.style.height = "90vh"
      popstyle.style.width = "100vw"
   
      let w = window.innerWidth;
      let h = window.innerHeight;
     //   alert("Hheight " +h+"  width " +w)
       
         var element = document.querySelector("#img-view")
         if(h<w){
         element.style.height = "90vh";
      //  element.style.width = "70vh";
         }
         if(h>w){
        //  element.style.height = "90vw";
       element.style.width = "95vw";
         }
    }
  
  });
  
  document.querySelector('.DP-popup span').onclick = () => {
    document.querySelector('.DP-popup').style.display = 'none';
  }
 
  </script>
  
{% endblock %}
